2025-12-31 10:03:34.904 [INFO] [INFO] SqlitePoolManager - _leak_detection_task -  Task started: will check and reclaim leaked or idle connections from the pool | pool_name=./data/agents.db check_interval_mins=5 component=SqlitePoolManager subcomponent=_leak_detection_task service_name=service-29108 environment=dev
2025-12-31 10:03:34.908 [INFO] [INFO] SqlitePoolManager - _initialize_pool_if_needed -  ./data/agents.db pool initialized in 0.01s | component=SqlitePoolManager subcomponent=_initialize_pool_if_needed service_name=service-29108 environment=dev
2025-12-31 10:03:34.919 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 1, "total_released": 0, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-29108 environment=dev
2025-12-31 10:03:35.447 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 1, "total_released": 1, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-29108 environment=dev
2025-12-31 10:03:56.771 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 2, "total_released": 1, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-29108 environment=dev
2025-12-31 10:08:22.808 [INFO] [INFO] SqlitePoolManager - _leak_detection_task -  Task started: will check and reclaim leaked or idle connections from the pool | pool_name=./data/agents.db check_interval_mins=5 component=SqlitePoolManager subcomponent=_leak_detection_task service_name=service-27620 environment=dev
2025-12-31 10:08:22.834 [INFO] [INFO] SqlitePoolManager - _initialize_pool_if_needed -  ./data/agents.db pool initialized in 0.03s | component=SqlitePoolManager subcomponent=_initialize_pool_if_needed service_name=service-27620 environment=dev
2025-12-31 10:08:22.834 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 1, "total_released": 0, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:23.148 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 1, "total_released": 1, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:33.406 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 2, "total_released": 1, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:33.537 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field name in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.554 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field owner_user_id in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.563 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field workspace_id in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.579 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field system_prompt in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.589 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field model in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.600 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field provider in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.610 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field tools in agents with type list | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.615 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field capabilities in agents with type list | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.619 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field context_schema in agents with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.625 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field metadata in agents with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.629 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field temperature in agents with type float | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.634 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field max_tokens in agents with type int | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.639 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field memory_strategy in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.646 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field memory_params in agents with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.650 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field premium_provider in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.655 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field premium_model in agents with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.670 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column name to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.687 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column owner_user_id to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.705 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column workspace_id to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.724 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column system_prompt to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.738 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column model to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.741 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column provider to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.757 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column tools to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.775 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column capabilities to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.791 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column context_schema to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.814 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column metadata to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.843 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column temperature to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.860 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column max_tokens to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.881 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column memory_strategy to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.901 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column memory_params to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.918 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column premium_provider to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.935 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column premium_model to history table agents_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:33.962 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents_history from schema: ['id', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', 'version', 'history_timestamp', 'history_user_id', 'history_comment', 'name', 'owner_user_id', 'workspace_id', 'system_prompt', 'model', 'provider', 'tools', 'capabilities', 'context_schema', 'metadata', 'temperature', 'max_tokens', 'memory_strategy', 'memory_params', 'premium_provider', 'premium_model'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:33.986 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 2, "total_released": 2, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:34.002 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 3, "total_released": 2, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:34.025 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:34.031 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 3, "total_released": 3, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:38.073 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 4, "total_released": 3, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:38.176 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field name in workspaces with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.193 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field description in workspaces with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.210 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field metadata in workspaces with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.242 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column name to history table workspaces_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.293 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column description to history table workspaces_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.317 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column metadata to history table workspaces_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.428 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for workspaces_history from schema: ['id', '0', '1', '2', '3', '4', '5', '6', 'version', 'history_timestamp', 'history_user_id', 'history_comment', 'name', 'description', 'metadata'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:38.555 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field workspace_id in workspace_members with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.588 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field user_id in workspace_members with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.593 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field role in workspace_members with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.635 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column workspace_id to history table workspace_members_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.666 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column user_id to history table workspace_members_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.682 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column role to history table workspace_members_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.746 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for workspace_members_history from schema: ['id', '0', '1', '2', '3', '4', '5', 'version', 'history_timestamp', 'history_user_id', 'history_comment', 'workspace_id', 'user_id', 'role'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:38.890 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field agent_id in threads with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.905 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field workspace_id in threads with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.909 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field title in threads with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.953 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field config in threads with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.969 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field user_id in threads with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:38.985 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field metadata in threads with type dict | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.001 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field message_count in threads with type int | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.015 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field total_bytes in threads with type int | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.021 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field archived in threads with type bool | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.032 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column agent_id to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.048 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column workspace_id to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.080 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column title to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.097 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column config to table threads | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.105 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column config to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.119 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column user_id to table threads | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.143 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column user_id to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.158 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column metadata to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.167 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column message_count to table threads | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.172 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column message_count to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.191 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column total_bytes to table threads | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.206 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column total_bytes to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.219 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column archived to table threads | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.230 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Adding column archived to history table threads_history | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
2025-12-31 10:08:39.262 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads_history from schema: ['id', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', 'version', 'history_timestamp', 'history_user_id', 'history_comment', 'agent_id', 'workspace_id', 'title', 'config', 'user_id', 'metadata', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.274 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 4, "total_released": 4, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.289 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 5, "total_released": 4, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.324 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.336 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 5, "total_released": 5, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.356 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 6, "total_released": 5, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.392 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.401 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 6, "total_released": 6, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.441 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 7, "total_released": 6, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.473 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.506 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 7, "total_released": 7, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.523 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 8, "total_released": 7, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.574 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.618 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.622 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 8, "total_released": 8, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.637 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 9, "total_released": 8, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:39.690 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.707 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:39.741 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 0, "idle": 1, "active_connections": 1, "shutting_down": false, "metrics": {"total_acquired": 9, "total_released": 9, "current_active": 0, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:41.963 [INFO] [INFO] SqlitePoolManager - _track_metrics -  Pool status:
{"initialized": true, "alias": "./data/agents.db", "hash": "e0d27ba34551647d", "min_size": 1, "max_size": 1, "current_size": 1, "in_use": 1, "idle": 0, "active_connections": 0, "shutting_down": false, "metrics": {"total_acquired": 10, "total_released": 9, "current_active": 1, "peak_active": 1, "errors": 0, "timeouts": 0, "last_timeout": null, "avg_acquisition_time": 0.0}} | component=SqlitePoolManager subcomponent=_track_metrics service_name=service-27620 environment=dev
2025-12-31 10:08:41.987 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:41.988 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:42.088 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for threads from schema: ['id', 'agent_id', 'title', 'summary', 'turn_count', 'token_count', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'deleted_at', 'config', 'user_id', 'message_count', 'total_bytes', 'archived'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:42.123 [INFO] [INFO] SqliteAsyncConnection - _get_field_names -  Got field names for agents from schema: ['id', 'name', 'system_prompt', 'model', 'provider', 'premium_provider', 'premium_model', 'temperature', 'max_tokens', 'tools', 'guardrails', 'memory_strategy', 'memory_params', 'context_schema', 'capabilities', 'owner_user_id', 'workspace_id', 'metadata', 'created_at', 'updated_at', 'created_by', 'updated_by', 'deleted_at'] | component=SqliteAsyncConnection subcomponent=_get_field_names service_name=service-27620 environment=dev
2025-12-31 10:08:44.706 [INFO] [INFO] SqliteAsyncConnection - _update_entity_metadata -  Found new field thread_id in messages with type str | component=SqliteAsyncConnection subcomponent=_update_entity_metadata service_name=service-27620 environment=dev
